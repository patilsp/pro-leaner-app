<!DOCTYPE html>
<html>
<head>
  <title>ACT1</title>
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="../../../contents/bootstrap_4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../../../contents/assets/fonts/San-Francisco-Font/fonts.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/froala_editor.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/froala_style.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/code_view.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/colors.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/emoticons.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/image_manager.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/image.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/line_breaker.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/table.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/char_counter.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/video.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/fullscreen.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/file.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/codemirror.min.css">
  <link rel="stylesheet" type="text/css" href="../../../contents/css/static_layouts/lessons/Layout6.0.css">
  <style type="text/css">
      .form-control{
        height: auto;
      }
      body{
        overflow-y: scroll;
      }
      li {
          border:1px dashed Gainsboro;
          display:inline-block;
      }
      .input-group{
        max-width: 500px;
        width: 100%
      }
      .fr-box a{
      display: none !important;
    }
    a[href="https://www.froala.com/wysiwyg-editor?k=u"]{
      padding: 0px !important;
      height: 0px !important;
      display: none !important;
    }
  </style>
</head>
<body>
  <form id="layout_form" name="layout_form" enctype="multipart/form-data">
    <div class="container-fluid">
        <div class="rowalign-items-center grid-divider" id="grid-divider1">
            <div class="card my-5">
              <div class="card-header">
                <div class="form-group">
                    <label for="act_title">Title</label>
                    <textarea class="form-control" id="act_title" name="act_title" rows="3"></textarea>
                </div>
              </div>
              <div class="card-body">
                <div class="card">
                  <div class="card-header d-flex align-items-center border-info">
                    Add extra Words</div>
                    
                    <div class="card-body p-0 mb-2 d-flex align-items-center">
                      <div class="input-group m-2">
                        <div class="input-group-prepend">
                          <span class="input-group-text">word 1</span>
                        </div>
                        <textarea class="form-control froala_editor" id="word1" name="word1" rows="2"></textarea>
                      </div>
                      <div class="input-group m-2">
                        <div class="input-group-prepend">
                          <span class="input-group-text">word 2</span>
                        </div>
                        <textarea class="form-control froala_editor" id="word2" name="word2" rows="2"></textarea>
                      </div>
                      <div class="input-group m-2">
                        <div class="input-group-prepend">
                          <span class="input-group-text">word 3</span>
                        </div>
                        <textarea class="form-control froala_editor" id="word3" name="word3" rows="2"></textarea>
                      </div>
                      <div class="input-group m-2">
                        <div class="input-group-prepend">
                          <span class="input-group-text">word 4</span>
                        </div>
                        <textarea class="form-control froala_editor" id="word4" name="word4" rows="2"></textarea>
                      </div>
                    </div>
                  <div class="card-header d-flex align-items-center border-info">
                    Question1
                    <div class="input-group mx-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Answer</span>
                      </div>
                      <textarea class="form-control froala_editor" id="qust1_right_word" name="qust1[right_word]" rows="2"></textarea>
                      <input type="hidden" value="1" name="qust1[optionId]">
                    </div>
                  </div>
                    
                    <div class="card-body p-0 mb-2" id="list-A">
                      <textarea class="form-control froala_editor qust" id="qust1" name="qust1[qust1]" rows="2"></textarea>
                    </div>
                  
                  <div class="card-header d-flex align-items-center border-info">
                    Question2
                    <div class="input-group mx-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Answer</span>
                      </div>
                      <textarea class="form-control froala_editor" id="qust2_right_word" name="qust2[right_word]" rows="2"></textarea>
                      <input type="hidden" value="2" name="qust2[optionId]">
                    </div>
                  </div>
                  
                    <div class="card-body p-0 mb-2" id="list-B">
                      <textarea class="form-control froala_editor qust" id="qust2" name="qust2[qust2]" rows="2"></textarea>
                    </div>  
                  
                  <div class="card-header d-flex align-items-center border-info">
                    Question3
                    <div class="input-group mx-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Answer</span>
                      </div>
                      <textarea class="form-control froala_editor" id="qust3_right_word" name="qust3[right_word]" rows="2"></textarea>
                      <input type="hidden" value="3" name="qust3[optionId]">
                    </div>
                  </div>
                  
                    <div class="card-body p-0 mb-2" id="list-C">
                      <textarea class="form-control froala_editor qust" id="qust3" name="qust3[qust3]" rows="2"></textarea>  
                  
                </div>
              </div>
             <div class="card-footer py-0">
                <div class="row align-items-center grid-divider" id="grid-divider2">
                    <div class="col-8" id="content">
                        <div class="form-group">
                            <label for="explanation">Explanation</label>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp1]" id="explanation1" rows="2"></textarea>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp2]" id="explanation2" rows="2"></textarea>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp3]" id="explanation3" rows="2"></textarea>
                        </div>
                    </div>
                    <div class="col-4" id="img_block">
                      <input type="hidden" name="exp_img" class="image" value="" />
                      <img src="../../../images/upload.jpg" id="exp_img" class="image exp_img img-fluid mx-auto d-block" />
                    </div>
                </div>
              </div>
            </div>
        </div>
    </div>
  </form>
  <script src="../../../contents/bootstrap_4.1.3/js/jquery-3.3.1.min.js"></script>
  <script src="../../../contents/bootstrap_4.1.3/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/froala_editor.min.js" ></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/align.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/char_counter.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/code_beautifier.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/code_view.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/colors.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/draggable.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/emoticons.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/entities.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/file.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/font_size.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/font_family.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/fullscreen.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/image.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/image_manager.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/line_breaker.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/inline_style.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/link.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/lists.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/paragraph_format.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/paragraph_style.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/quote.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/table.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/save.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/url.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/video.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){


      var qust1 = $("#qust1").html();
      var qust2 = $("#qust2").html();
      var qust3 = $("#qust3").html();

      var urlGet = document.URL;
      if ((i = urlGet.indexOf('?')) >= 0) {
        var split_url_val = urlGet.split('?');
        var split_url_qust_id = split_url_val[1].split('&');
        var api_url = split_url_qust_id[0].replace('api_end_point=','');
        var qust_id = split_url_qust_id[1].replace('qust_id=','');
      
        setTimeout(function () {
          //console.log(api_url,'-',qust_id);
            $.ajax({
                url: '../../../../'+api_url+'?qust_id='+qust_id,
                method:'GET',
                contentType:false,
                processData:false,
                async:true,
                success:function(data)
                {
                  data = JSON.parse(data);
                  console.log(data);
                  $("#act_title").text(data.act_title);
                  if(data.exp_img != "")
                    $(".exp_img").attr("src",data.exp_img);
                  $("#explanation1").text(data.explanation.exp1);
                  $("#explanation2").text(data.explanation.exp2);
                  $("#explanation3").text(data.explanation.exp3);
                  $(".image").val(data.exp_img);
                  $("#word1").val(data.word1);
                  $("#word2").val(data.word2);
                  $("#word3").val(data.word3);
                  $("#word4").val(data.word4);
                  
                  var question_part1 = "";
                  var question_part2 = "";
                  var answer = "";
                  $.each(data, function(i, e){
                    if(i == 'qust1') {
                      $("#qust1").html('');
                      $.each(e, function(key, val){
                        if(key == "qust1"){
                          $("#qust1").text(val);
                        }
                        else if(key == "right_word"){
                          $("#qust1_right_word").val(val);
                        }
                      });
                    } else if(i == 'qust2') {
                      $("#qust2").html('');
                      $.each(e, function(key, val){
                        if(key == "qust2"){
                          $("#qust2").text(val);
                        }
                        else if(key == "right_word"){
                          $("#qust2_right_word").val(val);
                        }
                      });
                    } else if(i == 'qust3') {
                      $("#qust3").html('');
                      $.each(e, function(key, val){
                        if(key == "qust3"){
                          $("#qust3").text(val);
                        }
                        else if(key == "right_word"){
                          $("#qust3_right_word").val(val);
                        }
                      });
                    }
                  });
                },
                beforeSend: function(){
                  $("#loader_modal").modal("show");
                },
                complete: function(){
                  setTimeout(function(){
                    $("#loader_modal").modal("hide");
                  }, 1000);
                }
            });
        }, 1000);
      }

      var classId = '';
      var subjectId = '';
      console.log(parent);
      var uploadURL = '../../conceptprep/apis/editorUploadImages.php?class_id='+classId+'&subject_id='+subjectId;
      setTimeout(function() {
      
        $('.froala_editor').froalaEditor({
            imageEditButtons: ['imageDisplay', 'imageAlign', 'imageInfo', 'imageRemove'],
            //toolbarButtons: ['undo', 'redo' , 'bold', 'image', '|', 'wirisEditor', 'wirisChemistry','clear', 'insert'],
            toolbarButtons: ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', '|', 'color','|', 'insertImage','|', 'print', 'help', 'html', '|', 'undo', 'redo'],
            // Allowed tags
            htmlAllowedTags:   ['.*'],
            htmlAllowedAttrs: ['.*'],
            // Set the file upload URL.
            imageUploadURL: uploadURL,

            imageUploadParams: {
              id: 'my_editor'
            },
            placeholderText: '',
            imageDefaultWidth: 'auto',
            pastePlain: true
            //toolbarInline: true
        });
      }, 1500)
      
      setTimeout(function () {
        if( $('#qust1').is(':empty') ) {
          $("#qust1").html(qust1);
        }
        if( $('#qust2').is(':empty') ) {
          $("#qust2").html(qust2);
        }
        if( $('#qust3').is(':empty') ) {
          $("#qust3").html(qust3);
        }
      }, 2000);
    })
  </script>
</body>
</html>