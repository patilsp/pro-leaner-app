<!DOCTYPE html>
<html>
<head>
  <title>ACT1</title>
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="../../../contents/bootstrap_4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../../../contents/assets/fonts/San-Francisco-Font/fonts.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/froala_editor.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/froala_style.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/code_view.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/colors.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/emoticons.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/image_manager.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/image.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/line_breaker.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/table.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/char_counter.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/video.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/fullscreen.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/file.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/codemirror.min.css">
  <link rel="stylesheet" type="text/css" href="../../../contents/css/static_layouts/lessons/Layout6.0.css">
  <style type="text/css">
      .form-control{
        height: auto;
      }
      body{
        overflow-y: scroll;
      }
      .fr-box a{
      display: none !important;
    }
    a[href="https://www.froala.com/wysiwyg-editor?k=u"]{
      padding: 0px !important;
      height: 0px !important;
      display: none !important;
    }
    .ipBox {
      gap: 1rem;
    }
    input.form-control {
      max-width: 50px;
      width: 100%;
    }
  </style>
</head>
<body>
  <form id="layout_form" name="layout_form" enctype="multipart/form-data">
    <div class="container-fluid">
        <div class="rowalign-items-center grid-divider" id="grid-divider1">
            <div class="card my-5">
              <div class="card-header">
                <div class="form-group">
                    <label for="act_title">Title</label>
                    <textarea class="form-control froala_editor" id="act_title" name="act_title" rows="3"></textarea>
                </div>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered text-center">
                        <thead>
                            <th>Question</th>
                            <th>Answer</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <textarea class="form-control froala_editor qust qust1_option1_text" name="qust1[qust1]" rows="2"></textarea>
                                </td>
                                <td>
                                  <div class="d-flex align-content-center justify-content-center ipBox">
                                    <input type="text" maxlength="1"class="inputs form-control qust1_box1_label" name="qust1[ans_box1]">
                                    <input type="text" maxlength="1"class="inputs form-control qust1_box2_label" name="qust1[ans_box2]">
                                    <input type="text" maxlength="1"class="inputs form-control qust1_box3_label" name="qust1[ans_box3]">
                                    <input type="text" maxlength="1"class="inputs form-control qust1_box4_label" name="qust1[ans_box4]">
                                    <input type="text" maxlength="1"class="inputs form-control qust1_box5_label" name="qust1[ans_box5]">
                                    <input type="text" maxlength="1"class="inputs form-control qust1_box6_label" name="qust1[ans_box6]">
                                    <input type="text" maxlength="1"class="inputs form-control qust1_box7_label" name="qust1[ans_box7]">
                                  </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea class="form-control froala_editor qust qust2_option2_text" name="qust2[qust2]" rows="2"></textarea>
                                </td>
                                <td>
                                  <div class="d-flex align-content-center justify-content-center ipBox">
                                    <input type="text" maxlength="1"class="inputs form-control qust2_box1_label" name="qust2[ans_box1]">
                                    <input type="text" maxlength="1"class="inputs form-control qust2_box2_label" name="qust2[ans_box2]">
                                    <input type="text" maxlength="1"class="inputs form-control qust2_box3_label" name="qust2[ans_box3]">
                                    <input type="text" maxlength="1"class="inputs form-control qust2_box4_label" name="qust2[ans_box4]">
                                    <input type="text" maxlength="1"class="inputs form-control qust2_box5_label" name="qust2[ans_box5]">
                                    <input type="text" maxlength="1"class="inputs form-control qust2_box6_label" name="qust2[ans_box6]">
                                    <input type="text" maxlength="1"class="inputs form-control qust2_box7_label" name="qust2[ans_box7]">
                                  </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <textarea class="form-control froala_editor qust qust3_option3_text" name="qust3[qust3]" rows="2"></textarea>
                                </td>
                                <td>
                                  <div class="d-flex align-content-center justify-content-center ipBox">
                                    <input type="text" maxlength="1"class="inputs form-control qust3_box1_label" name="qust3[ans_box1]">
                                    <input type="text" maxlength="1"class="inputs form-control qust3_box2_label" name="qust3[ans_box2]">
                                    <input type="text" maxlength="1"class="inputs form-control qust3_box3_label" name="qust3[ans_box3]">
                                    <input type="text" maxlength="1"class="inputs form-control qust3_box4_label" name="qust3[ans_box4]">
                                    <input type="text" maxlength="1"class="inputs form-control qust3_box5_label" name="qust3[ans_box5]">
                                    <input type="text" maxlength="1"class="inputs form-control qust3_box6_label" name="qust3[ans_box6]">
                                    <input type="text" maxlength="1"class="inputs form-control qust3_box7_label" name="qust3[ans_box7]">
                                  </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
              </div>
              <div class="card-footer py-0">
                <div class="row align-items-center grid-divider" id="grid-divider2">
                    <div class="col-8" id="content">
                        <div class="form-group">
                            <label for="explanation">Explanation</label>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp1]" id="explanation1" rows="2"></textarea>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp2]" id="explanation2" rows="2"></textarea>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp3]" id="explanation3" rows="2"></textarea>
                        </div>
                    </div>
                    <div class="col-4" id="img_block">
                      <input type="hidden" name="exp_img" class="image" value="" />
                      <img src="../../../images/upload.jpg" id="exp_img" class="image exp_img img-fluid mx-auto d-block" />
                    </div>
                </div>
              </div>
            </div>
        </div>
    </div>
  </form>
  <script src="../../../contents/bootstrap_4.1.3/js/jquery-3.3.1.min.js"></script>
  <script src="../../../contents/bootstrap_4.1.3/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/froala_editor.min.js" ></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/align.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/char_counter.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/code_beautifier.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/code_view.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/colors.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/draggable.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/emoticons.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/entities.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/file.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/font_size.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/font_family.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/fullscreen.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/image.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/image_manager.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/line_breaker.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/inline_style.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/link.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/lists.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/paragraph_format.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/paragraph_style.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/quote.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/table.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/save.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/url.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/video.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      $(".inputs").keyup(function () {
        if (this.value.length == this.maxLength) {
          $(this).next('.inputs').focus();
        }
      });

      $(':input').keydown(function(e) {
          if ((e.which == 8 || e.which == 46) && $(this).val() =='') {
              $(this).prev('input').focus();
          }
      });

      var urlGet = document.URL;
      if ((i = urlGet.indexOf('?')) >= 0) {
        var split_url_val = urlGet.split('?');
        var split_url_qust_id = split_url_val[1].split('&');
        var api_url = split_url_qust_id[0].replace('api_end_point=','');
        var qust_id = split_url_qust_id[1].replace('qust_id=','');
        
        setTimeout(function () {
          //console.log(api_url,'-',qust_id);
            $.ajax({
                url: '../../../../'+api_url+'?qust_id='+qust_id,
                method:'GET',
                contentType:false,
                processData:false,
                async:true,
                success:function(data)
                {
                  data = JSON.parse(data);
                  console.log(data);
                  $("#act_title").text(data.act_title);
                  if(data.exp_img != "")
                    $(".exp_img").attr("src",data.exp_img);
                  $("#explanation1").text(data.explanation.exp1);
                  $("#explanation2").text(data.explanation.exp2);
                  $("#explanation3").text(data.explanation.exp3);
                  
                  var question = "";
                  var option1 = "";
                  var option1_val = "";
                  var option2 = "";
                  var option2_val = "";
                  $.each(data, function(i, e){
                    //console.log(i," - ",e);
                    if(i == 'qust1') {
                      $(".qust1_option1_text").val(e.qust1);
                      for (var i = 1; i <= 7; i++) {
                        var objKey;
                        if(i == 1) {
                          objKey = e.ans_box1;
                        } else if(i == 2) {
                          objKey = e.ans_box2;
                        } else if(i == 3) {
                          objKey = e.ans_box3;
                        } else if(i == 4) {
                          objKey = e.ans_box4;
                        } else if(i == 5) {
                          objKey = e.ans_box5;
                        } else if(i == 6) {
                          objKey = e.ans_box6;
                        } else if(i == 7) {
                          objKey = e.ans_box7;
                        }
                        $(".qust1_box"+i+"_label").val(objKey);
                      }
                    } else if(i == 'qust2') {
                      $(".qust2_option2_text").val(e.qust2);
                      for (var i = 1; i <= 7; i++) {
                        var objKey;
                        if(i == 1) {
                          objKey = e.ans_box1;
                        } else if(i == 2) {
                          objKey = e.ans_box2;
                        } else if(i == 3) {
                          objKey = e.ans_box3;
                        } else if(i == 4) {
                          objKey = e.ans_box4;
                        } else if(i == 5) {
                          objKey = e.ans_box5;
                        } else if(i == 6) {
                          objKey = e.ans_box6;
                        } else if(i == 7) {
                          objKey = e.ans_box7;
                        }
                        $(".qust2_box"+i+"_label").val(objKey);
                      }
                    } else if(i == 'qust3') {
                      $(".qust3_option3_text").val(e.qust3);
                      for (var i = 1; i <= 7; i++) {
                        var objKey;
                        if(i == 1) {
                          objKey = e.ans_box1;
                        } else if(i == 2) {
                          objKey = e.ans_box2;
                        } else if(i == 3) {
                          objKey = e.ans_box3;
                        } else if(i == 4) {
                          objKey = e.ans_box4;
                        } else if(i == 5) {
                          objKey = e.ans_box5;
                        } else if(i == 6) {
                          objKey = e.ans_box6;
                        } else if(i == 7) {
                          objKey = e.ans_box7;
                        }
                        $(".qust3_box"+i+"_label").val(objKey);
                      }
                    }
                  });
                },
                beforeSend: function(){
                  $("#loader_modal").modal("show");
                },
                complete: function(){
                  setTimeout(function(){
                    $("#loader_modal").modal("hide");
                  }, 1000);
                }
            });
        }, 1000)
      }

      var classId = '';
      var subjectId = '';
      console.log(parent);
      var uploadURL = '../../conceptprep/apis/editorUploadImages.php?class_id='+classId+'&subject_id='+subjectId;
      setTimeout(function() {
      
        $('.froala_editor').froalaEditor({
            imageEditButtons: ['imageDisplay', 'imageAlign', 'imageInfo', 'imageRemove'],
            //toolbarButtons: ['undo', 'redo' , 'bold', 'image', '|', 'wirisEditor', 'wirisChemistry','clear', 'insert'],
            toolbarButtons: ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', '|', 'color','|', 'insertImage','|', 'print', 'help', 'html', '|', 'undo', 'redo'],
            // Allowed tags
            htmlAllowedTags:   ['.*'],
            htmlAllowedAttrs: ['.*'],
            // Set the file upload URL.
            imageUploadURL: uploadURL,

            imageUploadParams: {
              id: 'my_editor'
            },
            placeholderText: 'enter bullet points here..',
            imageDefaultWidth: 'auto',
            pastePlain: true,
            /*Set the image upload URL.
            https://froala.com/wysiwyg-editor/docs/sdks/php/image-manager/
            imageManagerLoadURL: '/load_images.php'*/
            //toolbarInline: true
        });
      }, 1500)
    })
  </script>
</body>
</html>