<!DOCTYPE html>
<html>
<head>
  <title>ACT1</title>
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="../../../contents/bootstrap_4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../../../contents/assets/fonts/San-Francisco-Font/fonts.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/froala_editor.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/froala_style.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/code_view.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/colors.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/emoticons.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/image_manager.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/image.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/line_breaker.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/table.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/char_counter.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/video.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/fullscreen.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/css/plugins/file.css">
  <link rel="stylesheet" href="../../conceptprep/layouts/froala/codemirror.min.css">
  <link rel="stylesheet" type="text/css" href="../../../contents/css/static_layouts/lessons/Layout6.0.css">
  <style type="text/css">
      .form-control{
        height: auto;
      }
      body{
        overflow-y: scroll;
      }
      table img{
        width: 100px
      }
      td{
        text-align: left;
      }
      .fr-box a{
      display: none !important;
    }
    a[href="https://www.froala.com/wysiwyg-editor?k=u"]{
      padding: 0px !important;
      height: 0px !important;
      display: none !important;
    }
    .table td {
      padding: 0px;
    }
  </style>
</head>
<body>
  <form id="layout_form" name="layout_form" enctype="multipart/form-data">
    <div class="container-fluid">
        <div class="rowalign-items-center grid-divider" id="grid-divider1">
            <div class="card my-5">
              <div class="card-header">
                <div class="form-group">
                    <label for="act_title">Title</label>
                    <textarea class="form-control" id="act_title" name="act_title" rows="1"></textarea>
                </div>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <td colspan="3">
                                  <div class="card-header shadow font-weight-bold bg-info text-white">
                                    Note: All image resolution should be <b class="h2">150</b> Pixcel
                                  </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                  <div class="card-header shadow">
                                    picture1
                                  </div>
                                  <div class="d-flex align-content-center justify-content-center pt-3 px-3">
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust1[qustImgOpt1Ref]" value="img1_1" />
                                      <input type="hidden" name="qust1[qustImgOpt1]" class="image img1" value="" />
                                      <img src="../../../images/upload.jpg" id="img1" class="exp_img img-fluid mx-auto d-block img1" />
                                    </div>
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust1[qustImgOpt2Ref]" value="img1_2" />
                                      <input type="hidden" name="qust1[qustImgOpt2]" class="image img2" value="" />
                                      <img src="../../../images/upload.jpg" id="img2" class="exp_img img-fluid mx-auto d-block img2" />
                                    </div>
                                  </div>
                                  <div class="d-flex align-content-center justify-content-center pb-3 px-3">
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust1[qustImgOpt3Ref]" value="img1_3" />
                                      <input type="hidden" name="qust1[qustImgOpt3]" class="image img3" value="" />
                                      <img src="../../../images/upload.jpg" id="img3" class="exp_img img-fluid mx-auto d-block img3" />
                                    </div>
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust1[qustImgOpt4Ref]" value="img1_4" />
                                      <input type="hidden" name="qust1[qustImgOpt4]" class="image img4" value="" />
                                      <img src="../../../images/upload.jpg" id="img4" class="exp_img img-fluid mx-auto d-block img4" />
                                    </div>
                                  </div>
                                </td>
                                <td>
                                  <div class="card-header shadow">
                                    picture2
                                  </div>
                                  <div class="d-flex align-content-center justify-content-center pt-3 px-3">
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust2[qustImgOpt1Ref]" value="img2_1" />
                                      <input type="hidden" name="qust2[qustImgOpt1]" class="image img5" value="" />
                                      <img src="../../../images/upload.jpg" id="img5" class="exp_img img-fluid mx-auto d-block img5" />
                                    </div>
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust2[qustImgOpt2Ref]" value="img2_2" />
                                      <input type="hidden" name="qust2[qustImgOpt2]" class="image img6" value="" />
                                      <img src="../../../images/upload.jpg" id="img6" class="exp_img img-fluid mx-auto d-block img6" />
                                    </div>
                                  </div>
                                  <div class="d-flex align-content-center justify-content-center pb-3 px-3">
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust2[qustImgOpt3Ref]" value="img2_3" />
                                      <input type="hidden" name="qust2[qustImgOpt3]" class="image img7" value="" />
                                      <img src="../../../images/upload.jpg" id="img7" class="exp_img img-fluid mx-auto d-block img7" />
                                    </div>
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust2[qustImgOpt4Ref]" value="img2_4" />
                                      <input type="hidden" name="qust2[qustImgOpt4]" class="image img8" value="" />
                                      <img src="../../../images/upload.jpg" id="img8" class="exp_img img-fluid mx-auto d-block img8" />
                                    </div>
                                  </div>
                                </td>
                                <td>
                                  <div class="card-header shadow">
                                    picture3
                                  </div>
                                  <div class="d-flex align-content-center justify-content-center pt-3 px-3">
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust3[qustImgOpt1Ref]" value="img3_1" />
                                      <input type="hidden" name="qust3[qustImgOpt1]" class="image img9" value="" />
                                      <img src="../../../images/upload.jpg" id="img9" class="exp_img img-fluid mx-auto d-block img9" />
                                    </div>
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust3[qustImgOpt2Ref]" value="img3_2" />
                                      <input type="hidden" name="qust3[qustImgOpt2]" class="image img10" value="" />
                                      <img src="../../../images/upload.jpg" id="img10" class="exp_img img-fluid mx-auto d-block img10" />
                                    </div>
                                  </div>
                                  <div class="d-flex align-content-center justify-content-center pb-3 px-3">
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust3[qustImgOpt3Ref]" value="img3_3" />
                                      <input type="hidden" name="qust3[qustImgOpt3]" class="image img11" value="" />
                                      <img src="../../../images/upload.jpg" id="img11" class="exp_img img-fluid mx-auto d-block img11" />
                                    </div>
                                    <div class="input-group-text">
                                      <input type="hidden" name="qust3[qustImgOpt4Ref]" value="img3_4" />
                                      <input type="hidden" name="qust3[qustImgOpt4]" class="image img12" value="" />
                                      <img src="../../../images/upload.jpg" id="img12" class="exp_img img-fluid mx-auto d-block img12" />
                                    </div>
                                  </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
              </div>
              <div class="card-footer py-0">
                <div class="row align-items-center grid-divider" id="grid-divider2">
                    <div class="col-8" id="content">
                        <div class="form-group">
                            <label for="explanation">Explanation</label>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp1]" id="explanation1" rows="2"></textarea>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp2]" id="explanation2" rows="2"></textarea>
                            <textarea class="form-control froala_editor exp_content" name="explanation[exp3]" id="explanation3" rows="2"></textarea>
                        </div>
                    </div>
                    <div class="col-4" id="img_block">
                      <input type="hidden" name="exp_img" class="image" value="" />
                      <img src="../../../images/upload.jpg" id="exp_img" class="image exp_img img-fluid mx-auto d-block" />
                    </div>
                </div>
              </div>
            </div>
        </div>
    </div>
  </form>
  <script src="../../../contents/bootstrap_4.1.3/js/jquery-3.3.1.min.js"></script>
  <script src="../../../contents/bootstrap_4.1.3/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/froala_editor.min.js" ></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/align.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/char_counter.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/code_beautifier.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/code_view.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/colors.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/draggable.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/emoticons.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/entities.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/file.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/font_size.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/font_family.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/fullscreen.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/image.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/image_manager.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/line_breaker.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/inline_style.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/link.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/lists.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/paragraph_format.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/paragraph_style.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/quote.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/table.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/save.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/url.min.js"></script>
  <script type="text/javascript" src="../../conceptprep/layouts/froala/js/plugins/video.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){


      var urlGet = document.URL;
      if ((i = urlGet.indexOf('?')) >= 0) {
        var split_url_val = urlGet.split('?');
        var split_url_qust_id = split_url_val[1].split('&');
        var api_url = split_url_qust_id[0].replace('api_end_point=','');
        var qust_id = split_url_qust_id[1].replace('qust_id=','');
        
        setTimeout(function () {
          //console.log(api_url,'-',qust_id);
            $.ajax({
                url: '../../../../'+api_url+'?qust_id='+qust_id,
                method:'GET',
                contentType:false,
                processData:false,
                async:true,
                success:function(data)
                {
                  data = JSON.parse(data);
                  console.log(data);
                  $("#act_title").text(data.act_title);
                  if(data.exp_img != "")
                    $(".exp_img").attr("src",data.exp_img);
                  $("#explanation1").text(data.explanation.exp1);
                  $("#explanation2").text(data.explanation.exp2);
                  $("#explanation3").text(data.explanation.exp3);
                  
                  var question = "";
                  var option1 = "";
                  
                  $.each(data, function(i, e){
                    //console.log(i," - ",e);
                    if(i == 'qust1') {
                      $('.img1').val(e.qustImgOpt1);
                      $('.img1').attr("src",e.qustImgOpt1);

                      $('.img2').val(e.qustImgOpt2);
                      $('.img2').attr("src",e.qustImgOpt2);

                      $('.img3').val(e.qustImgOpt3);
                      $('.img3').attr("src",e.qustImgOpt3);

                      $('.img4').val(e.qustImgOpt4);
                      $('.img4').attr("src",e.qustImgOpt4);
                    } else if(i == 'qust2') {
                      $('.img5').val(e.qustImgOpt1);
                      $('.img5').attr("src",e.qustImgOpt1);

                      $('.img6').val(e.qustImgOpt2);
                      $('.img6').attr("src",e.qustImgOpt2);

                      $('.img7').val(e.qustImgOpt3);
                      $('.img7').attr("src",e.qustImgOpt3);

                      $('.img8').val(e.qustImgOpt4);
                      $('.img8').attr("src",e.qustImgOpt4);
                    } else if(i == 'qust3') {
                      $('.img9').val(e.qustImgOpt1);
                      $('.img9').attr("src",e.qustImgOpt1);

                      $('.img10').val(e.qustImgOpt2);
                      $('.img10').attr("src",e.qustImgOpt2);

                      $('.img11').val(e.qustImgOpt3);
                      $('.img11').attr("src",e.qustImgOpt3);

                      $('.img12').val(e.qustImgOpt4);
                      $('.img12').attr("src",e.qustImgOpt4);
                    }
                  });
                },
                beforeSend: function(){
                  $("#loader_modal").modal("show");
                },
                complete: function(){
                  setTimeout(function(){
                    $("#loader_modal").modal("hide");
                  }, 1000);
                }
            });
        }, 1000)
      }

      setTimeout(function () {
        $("select").change(function(){
          ////console.log("werffwre - ", $(this).closest("td").next('td').find("select").val());
          var val = $(this).val()
          var td_val_next = $(this).closest("td").next('td').find("select").val();
          if(val == td_val_next){
            alert("choose diff option");
            $(this).val("");
          }

          var td_val_prev = $(this).closest("td").prev('td').find("select").val();
          if(val == td_val_prev){
            alert("choose diff option");
            $(this).val("");
          }
        })
      }, 1500);

      var classId = '';
      var subjectId = '';
      console.log(parent);
      var uploadURL = '../../conceptprep/apis/editorUploadImages.php?class_id='+classId+'&subject_id='+subjectId;
      setTimeout(function() {
      
        $('.froala_editor').froalaEditor({
            imageEditButtons: ['imageDisplay', 'imageAlign', 'imageInfo', 'imageRemove'],
            //toolbarButtons: ['undo', 'redo' , 'bold', 'image', '|', 'wirisEditor', 'wirisChemistry','clear', 'insert'],
            toolbarButtons: ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', '|', 'color','|', 'insertImage','|', 'print', 'help', 'html', '|', 'undo', 'redo'],
            // Allowed tags
            htmlAllowedTags:   ['.*'],
            htmlAllowedAttrs: ['.*'],
            // Set the file upload URL.
            imageUploadURL: uploadURL,

            imageUploadParams: {
              id: 'my_editor'
            },
            placeholderText: '',
            imageDefaultWidth: 'auto',
            pastePlain: true
            //toolbarInline: true
        });
      }, 1500)
    })
  </script>
</body>
</html>